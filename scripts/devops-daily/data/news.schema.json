{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "DevOps Weekly Digest Schema",
  "description": "Schema for validating DevOps weekly digest files",
  "type": "object",
  "required": ["metadata", "categories"],
  "properties": {
    "metadata": {
      "type": "object",
      "required": ["title", "date", "week", "year", "summary"],
      "properties": {
        "title": {
          "type": "string",
          "pattern": "^DevOps Weekly Digest - Week \\d+, \\d{4}$"
        },
        "date": {
          "type": "string",
          "format": "date"
        },
        "week": {
          "type": "integer",
          "minimum": 1,
          "maximum": 53
        },
        "year": {
          "type": "integer",
          "minimum": 2020,
          "maximum": 2100
        },
        "summary": {
          "type": "string",
          "minLength": 10
        }
      }
    },
    "categories": {
      "type": "object",
      "properties": {
        "Kubernetes": {
          "$ref": "#/definitions/category"
        },
        "Cloud Native": {
          "$ref": "#/definitions/category"
        },
        "CI/CD": {
          "$ref": "#/definitions/category"
        },
        "IaC": {
          "$ref": "#/definitions/category"
        },
        "Observability": {
          "$ref": "#/definitions/category"
        },
        "Security": {
          "$ref": "#/definitions/category"
        },
        "Databases": {
          "$ref": "#/definitions/category"
        },
        "Platforms": {
          "$ref": "#/definitions/category"
        },
        "Misc": {
          "$ref": "#/definitions/category"
        }
      }
    }
  },
  "definitions": {
    "category": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/newsItem"
      },
      "maxItems": 12
    },
    "newsItem": {
      "type": "object",
      "required": ["title", "url", "source", "publishedAt", "summary"],
      "properties": {
        "title": {
          "type": "string",
          "minLength": 5,
          "maxLength": 200
        },
        "url": {
          "type": "string",
          "format": "uri"
        },
        "source": {
          "type": "string",
          "minLength": 2
        },
        "publishedAt": {
          "type": "string",
          "format": "date"
        },
        "summary": {
          "type": "string",
          "minLength": 20,
          "maxLength": 500
        },
        "tags": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "maxItems": 5
        },
        "category": {
          "type": "string",
          "enum": [
            "Kubernetes",
            "Cloud Native",
            "CI/CD",
            "IaC",
            "Observability",
            "Security",
            "Databases",
            "Platforms",
            "Misc"
          ]
        }
      }
    }
  }
}
